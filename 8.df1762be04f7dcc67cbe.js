(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"1XP4":function(t,e,s){"use strict";s.r(e),s.d(e,"PostsModule",function(){return B});var i=s("ofXK"),o=s("tk/3"),c=s("tyNb"),b=s("l7P3"),n=function(t){return t.GET_POSTS="[Posts] Get posts",t.GET_POSTS_SUCCESS="[Posts] Get posts success",t.GET_POSTS_FAILURE="[Posts] Get posts failure",t.ADD_POST="[Add Post Page] Add post",t.ADD_POST_SUCCESS="[Add Post Page] Add post success",t.ADD_POST_FAILURE="[Add Post Page] Add post failure",t.EDIT_POST="[Edit Post Page] Edit post",t.EDIT_POST_SUCCESS="[Edit Post Page] Edit post success",t.EDIT_POST_FAILURE="[Edit Post Page] Edit post failure",t.DELETE_POST="[Posts] Delete post",t.DELETE_POST_SUCCESS="[Posts] Delete post success",t.DELETE_POST_FAILURE="[Posts] Delete post failure",t}({});const a=Object(b.p)(n.GET_POSTS),r=Object(b.p)(n.GET_POSTS_SUCCESS,Object(b.u)()),d=Object(b.p)(n.GET_POSTS_FAILURE),p=Object(b.p)(n.ADD_POST,Object(b.u)()),O=Object(b.p)(n.ADD_POST_SUCCESS,Object(b.u)()),u=Object(b.p)(n.ADD_POST_FAILURE),l=Object(b.p)(n.EDIT_POST,Object(b.u)()),j=Object(b.p)(n.EDIT_POST_SUCCESS,Object(b.u)()),h=Object(b.p)(n.EDIT_POST_FAILURE),f=Object(b.p)(n.DELETE_POST,Object(b.u)()),g=Object(b.p)(n.DELETE_POST_SUCCESS),P=Object(b.p)(n.DELETE_POST_FAILURE);var S=s("fXoL"),E=s("3Pt+");let m=(()=>{class t{constructor(t){this.store=t}ngOnInit(){}addPost(t){this.store.dispatch(p({post:t}))}}return t.\u0275fac=function(e){return new(e||t)(S.Ib(b.i))},t.\u0275cmp=S.Cb({type:t,selectors:[["app-add-post"]],decls:15,vars:0,consts:[[1,"container-fluid"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","ngModel","","name","title",1,"form-control"],["for","body",1,"form-label"],["rows","3","id","body","ngModel","","name","body",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){if(1&t){const t=S.Ob();S.Nb(0,"div",0),S.Nb(1,"h1"),S.ic(2,"Add New Post"),S.Mb(),S.Nb(3,"form",1,2),S.Ub("ngSubmit",function(){S.ec(t);const s=S.dc(4);return e.addPost(s.value)}),S.Nb(5,"div",3),S.Nb(6,"label",4),S.ic(7,"Title"),S.Mb(),S.Jb(8,"input",5),S.Mb(),S.Nb(9,"div",3),S.Nb(10,"label",6),S.ic(11,"Description"),S.Mb(),S.Jb(12,"textarea",7),S.Mb(),S.Nb(13,"button",8),S.ic(14,"Add Post"),S.Mb(),S.Mb(),S.Mb()}},directives:[E.g,E.d,E.e,E.a,E.c,E.f],styles:[""]}),t})(),_=(()=>{class t{constructor(t){this.http=t,this.API_URL="https://bdo-api.azurewebsites.net/api/posts"}getPosts(){return this.http.get(this.API_URL)}addPost(t){return this.http.post(this.API_URL,t)}getPost(t){return this.http.get(`${this.API_URL}/${t}`)}updatePost(t,e){return this.http.put(`${this.API_URL}/${t}`,e)}deletePost(t){return this.http.delete(`${this.API_URL}/${t}`)}}return t.\u0275fac=function(e){return new(e||t)(S.Rb(o.a))},t.\u0275prov=S.Eb({token:t,factory:t.\u0275fac}),t})();function T(t,e){if(1&t){const t=S.Ob();S.Nb(0,"form",2,3),S.Ub("ngSubmit",function(){S.ec(t);const e=S.dc(1);return S.Wb().updatePost(e.value)}),S.Nb(2,"div",4),S.Nb(3,"label",5),S.ic(4,"Title"),S.Mb(),S.Jb(5,"input",6),S.Mb(),S.Nb(6,"div",4),S.Nb(7,"label",7),S.ic(8,"Description"),S.Mb(),S.Jb(9,"textarea",8),S.Mb(),S.Nb(10,"button",9),S.ic(11,"Update Post"),S.Mb(),S.Mb()}if(2&t){const t=S.Wb();S.yb(5),S.Zb("ngModel",t.post.title),S.yb(4),S.Zb("ngModel",t.post.body)}}let y=(()=>{class t{constructor(t,e,s){this.postService=t,this.route=e,this.store=s}ngOnInit(){this.fetcheData()}fetcheData(){const t=this.route.snapshot.paramMap.get("postId");this.sub=this.postService.getPost(t).subscribe(t=>{this.post=t})}updatePost(t){this.store.dispatch(l({postId:String(this.post.id),post:t}))}ngOnDestroy(){this.sub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(S.Ib(_),S.Ib(c.a),S.Ib(b.i))},t.\u0275cmp=S.Cb({type:t,selectors:[["app-edit-post"]],decls:4,vars:1,consts:[[1,"container-fluid"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["form","ngForm"],[1,"mb-3"],["for","title",1,"form-label"],["type","text","id","title","name","title",1,"form-control",3,"ngModel"],["for","body",1,"form-label"],["rows","3","id","body","name","body",1,"form-control",3,"ngModel"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){1&t&&(S.Nb(0,"div",0),S.Nb(1,"h1"),S.ic(2,"Edit Post"),S.Mb(),S.hc(3,T,12,2,"form",1),S.Mb()),2&t&&(S.yb(3),S.Zb("ngIf",e.post))},directives:[i.k,E.g,E.d,E.e,E.a,E.c,E.f],styles:[""]}),t})();const I=Object(b.q)("posts"),M=(Object(b.s)(I,t=>t.isLoading),Object(b.s)(I,t=>t.error),Object(b.s)(I,t=>t.data)),v=Object(b.s)(I,t=>t.loaded),L=function(t){return[t,"edit"]};function N(t,e){if(1&t){const t=S.Ob();S.Nb(0,"tr"),S.Nb(1,"td"),S.ic(2),S.Mb(),S.Nb(3,"td"),S.ic(4),S.Mb(),S.Nb(5,"td"),S.ic(6),S.Xb(7,"date"),S.Mb(),S.Nb(8,"td"),S.ic(9),S.Mb(),S.Nb(10,"td"),S.Nb(11,"a",8),S.Jb(12,"i",9),S.Mb(),S.Nb(13,"button",10),S.Ub("click",function(){S.ec(t);const s=e.$implicit;return S.Wb(2).removePost(s)}),S.Jb(14,"i",11),S.Mb(),S.Mb(),S.Mb()}if(2&t){const t=e.$implicit;S.yb(2),S.jc(t.id),S.yb(2),S.jc(t.title),S.yb(2),S.jc(S.Yb(7,5,t.createdOn)),S.yb(3),S.jc(t.body),S.yb(2),S.Zb("routerLink",S.bc(7,L,t.id))}}const D=function(){return["add"]};function A(t,e){if(1&t&&(S.Nb(0,"div",1),S.Nb(1,"div",2),S.Nb(2,"h1"),S.ic(3,"Posts"),S.Mb(),S.Nb(4,"a",3),S.Jb(5,"i",4),S.Mb(),S.Mb(),S.Nb(6,"table",5),S.Nb(7,"thead",6),S.Nb(8,"tr"),S.Nb(9,"th"),S.ic(10,"#ID"),S.Mb(),S.Nb(11,"th"),S.ic(12,"Title"),S.Mb(),S.Nb(13,"th"),S.ic(14,"Date"),S.Mb(),S.Nb(15,"th"),S.ic(16,"Description"),S.Mb(),S.Nb(17,"th"),S.ic(18,"Action"),S.Mb(),S.Mb(),S.Mb(),S.Nb(19,"tbody"),S.hc(20,N,15,9,"tr",7),S.Mb(),S.Mb(),S.Mb()),2&t){const t=e.ngIf;S.yb(4),S.Zb("routerLink",S.ac(2,D)),S.yb(16),S.Zb("ngForOf",t)}}let U=(()=>{class t{constructor(t){this.store=t}ngOnInit(){this.initializeValues()}initializeValues(){this.posts$=this.store.pipe(Object(b.v)(M))}removePost(t){this.store.dispatch(f({postId:t.id}))}}return t.\u0275fac=function(e){return new(e||t)(S.Ib(b.i))},t.\u0275cmp=S.Cb({type:t,selectors:[["app-posts"]],decls:2,vars:3,consts:[["class","container-fluid",4,"ngIf"],[1,"container-fluid"],[1,"d-flex","justify-content-between"],["title","Add Post",1,"btn","btn-primary","d-flex","align-self-center",3,"routerLink"],[1,"ti-plus"],[1,"table"],[1,"thead-light"],[4,"ngFor","ngForOf"],["title","Edit Post",1,"btn","btn-primary","mr-2",3,"routerLink"],[1,"ti-pencil"],["title","Remove Post",1,"btn","btn-danger",3,"click"],[1,"ti-trash"]],template:function(t,e){1&t&&(S.hc(0,A,21,3,"div",0),S.Xb(1,"async")),2&t&&S.Zb("ngIf",S.Yb(1,1,e.posts$))},directives:[i.k,c.h,i.j],pipes:[i.b,i.e],styles:[""]}),t})();var C=s("vkgz"),$=s("pLZG"),R=s("SxV6"),w=s("nYR2");let F=(()=>{class t{constructor(t){this.store=t,this.loaded=!1}resolve(t,e){return this.store.pipe(Object(b.v)(v),Object(C.a)(t=>{this.loaded||t||(this.loaded=!0,this.store.dispatch(a()))}),Object($.a)(t=>t),Object(R.a)(),Object(w.a)(()=>this.loaded=!1))}}return t.\u0275fac=function(e){return new(e||t)(S.Rb(b.i))},t.\u0275prov=S.Eb({token:t,factory:t.\u0275fac}),t})();const k=[{path:"",component:U,resolve:{posts:F}},{path:"add",component:m},{path:":postId/edit",component:y}];let G=(()=>{class t{}return t.\u0275mod=S.Gb({type:t}),t.\u0275inj=S.Fb({factory:function(e){return new(e||t)},imports:[[c.i.forChild(k)],c.i]}),t})();const J=Object(b.r)({data:null,isLoading:!1,error:null,loaded:!1},Object(b.t)(a,t=>Object.assign(Object.assign({},t),{isLoading:!0})),Object(b.t)(r,(t,e)=>Object.assign(Object.assign({},t),{isLoading:!1,data:e.posts,loaded:!0})),Object(b.t)(d,t=>Object.assign(Object.assign({},t),{isLoading:!1})),Object(b.t)(p,t=>Object.assign(Object.assign({},t),{isLoading:!0})),Object(b.t)(O,(t,e)=>Object.assign(Object.assign({},t),{isLoading:!1,data:[...t.data,e.post]})),Object(b.t)(u,t=>Object.assign(Object.assign({},t),{isLoading:!1})),Object(b.t)(l,t=>Object.assign(Object.assign({},t),{isLoading:!0})),Object(b.t)(j,(t,e)=>{const s=t.data.findIndex(t=>t.id===e.post.id);let i=[...t.data];return s>=0&&(i=[...t.data.slice(0,s),e.post,...t.data.slice(s+1)]),Object.assign(Object.assign({},t),{isLoading:!1,data:i})}),Object(b.t)(u,t=>Object.assign(Object.assign({},t),{isLoading:!1})),Object(b.t)(f,(t,e)=>{const s=t.data.filter(t=>t.id!==e.postId);return Object.assign(Object.assign({},t),{data:s})}),Object(b.t)(g,t=>Object.assign(Object.assign({},t),{isLoading:!1})),Object(b.t)(P,t=>Object.assign(Object.assign({},t),{isLoading:!1})));function x(t,e){return J(t,e)}var Z=s("9jGm"),X=s("eIep"),z=s("lJxs"),V=s("JIr8"),W=s("LRne");let Y=(()=>{class t{constructor(t,e,s){this.actions$=t,this.postService=e,this.router=s,this.getPosts$=Object(Z.d)(()=>this.actions$.pipe(Object(Z.e)(a),Object(X.a)(()=>this.postService.getPosts().pipe(Object(z.a)(t=>r({posts:t})),Object(V.a)(()=>Object(W.a)(d())))))),this.createPost$=Object(Z.d)(()=>this.actions$.pipe(Object(Z.e)(p),Object(X.a)(({post:t})=>this.postService.addPost(t).pipe(Object(z.a)(t=>O({post:t})),Object(V.a)(()=>Object(W.a)(u())))))),this.editPost$=Object(Z.d)(()=>this.actions$.pipe(Object(Z.e)(l),Object(X.a)(({postId:t,post:e})=>this.postService.updatePost(t,e).pipe(Object(z.a)(t=>j({post:t})),Object(V.a)(()=>Object(W.a)(h())))))),this.createPostSuccess$=Object(Z.d)(()=>this.actions$.pipe(Object(Z.e)(n.ADD_POST_SUCCESS),Object(C.a)(()=>{this.router.navigateByUrl("/posts")})),{dispatch:!1}),this.editPostSuccess$=Object(Z.d)(()=>this.actions$.pipe(Object(Z.e)(n.EDIT_POST_SUCCESS),Object(C.a)(()=>{this.router.navigateByUrl("/posts")})),{dispatch:!1}),this.deletePost$=Object(Z.d)(()=>this.actions$.pipe(Object(Z.e)(f),Object(X.a)(({postId:t})=>this.postService.deletePost(t).pipe(Object(z.a)(()=>g()),Object(V.a)(()=>Object(W.a)(P()))))))}}return t.\u0275fac=function(e){return new(e||t)(S.Rb(Z.a),S.Rb(_),S.Rb(c.f))},t.\u0275prov=S.Eb({token:t,factory:t.\u0275fac}),t})(),B=(()=>{class t{}return t.\u0275mod=S.Gb({type:t}),t.\u0275inj=S.Fb({factory:function(e){return new(e||t)},providers:[_,F],imports:[[i.c,o.b,E.b,G,b.k.forFeature("posts",x),Z.c.forFeature([Y])]]}),t})()}}]);