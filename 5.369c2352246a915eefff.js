(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{fX0g:function(t,i,e){"use strict";e.r(i),e.d(i,"AlbumsModule",function(){return y});var b=e("ofXK"),s=e("tyNb"),n=e("fXoL"),r=e("tk/3");let u=(()=>{class t{constructor(t){this.http=t,this.API_URL="https://jsonplaceholder.typicode.com/albums"}getAlbums(){return this.http.get(this.API_URL)}addAlbum(t){return this.http.post(this.API_URL,t)}getAlbum(t){return this.http.get(`${this.API_URL}/${t}`)}updateAlbum(t,i){return this.http.put(`${this.API_URL}/${t}`,i)}deleteAlbum(t){return this.http.delete(`${this.API_URL}/${t}`)}}return t.\u0275fac=function(i){return new(i||t)(n.Rb(r.a))},t.\u0275prov=n.Eb({token:t,factory:t.\u0275fac}),t})();var c=e("3Pt+");function o(t,i){1&t&&(n.Nb(0,"h1"),n.ic(1,"Edit Album"),n.Mb())}function a(t,i){1&t&&(n.Nb(0,"h1"),n.ic(1,"Add Album"),n.Mb())}function l(t,i){1&t&&(n.Lb(0),n.ic(1,"Update"),n.Kb())}function d(t,i){1&t&&(n.Lb(0),n.ic(1,"Add"),n.Kb())}let h=(()=>{class t{constructor(t,i,e,b,s){this.albumService=t,this.route=i,this.router=e,this.location=b,this.fb=s,this.editing=!1}ngOnInit(){this.initializeValues(),this.fetchData()}initializeValues(){this.form=this.fb.group({userId:[""],title:[""]})}fetchData(){this.routeSub=this.route.paramMap.subscribe(t=>{const i=t.params.id;if(i){this.editing=!0;const t=this.location.getState();t.id?this.form.patchValue(t):this.albumService.getAlbum(i).subscribe(t=>{this.form.patchValue(t)})}else this.editing=!1})}addEditPost(t){const i=this.route.snapshot.paramMap.get("id");this.addEditSub=i?this.albumService.updateAlbum(i,t).subscribe(t=>{this.router.navigateByUrl("/albums",{state:t})}):this.albumService.addAlbum(t).subscribe(t=>{this.router.navigateByUrl("/albums",{state:Object.assign(Object.assign({},t),{add:!0})})})}ngOnDestroy(){this.routeSub.unsubscribe(),this.addEditSub&&this.addEditSub.unsubscribe()}}return t.\u0275fac=function(i){return new(i||t)(n.Ib(u),n.Ib(s.a),n.Ib(s.f),n.Ib(b.i),n.Ib(c.b))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-add-edit-album"]],decls:15,vars:5,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["for","userId",1,"form-label"],["type","text","id","userId","formControlName","userId","name","userId",1,"form-control"],["for","title",1,"form-label"],["type","text","id","title","formControlName","title","name","title",1,"form-control"],["type","submit",1,"btn","btn-primary"]],template:function(t,i){1&t&&(n.hc(0,o,2,0,"h1",0),n.hc(1,a,2,0,"h1",0),n.Nb(2,"form",1),n.Ub("ngSubmit",function(){return i.addEditPost(i.form.value)}),n.Nb(3,"div",2),n.Nb(4,"label",3),n.ic(5,"User ID"),n.Mb(),n.Jb(6,"input",4),n.Mb(),n.Nb(7,"div",2),n.Nb(8,"label",5),n.ic(9,"Title"),n.Mb(),n.Jb(10,"input",6),n.Mb(),n.Nb(11,"button",7),n.hc(12,l,2,0,"ng-container",0),n.hc(13,d,2,0,"ng-container",0),n.ic(14," Album "),n.Mb(),n.Mb()),2&t&&(n.Zb("ngIf",i.editing),n.yb(1),n.Zb("ngIf",!i.editing),n.yb(1),n.Zb("formGroup",i.form),n.yb(10),n.Zb("ngIf",i.editing),n.yb(1),n.Zb("ngIf",!i.editing))},directives:[b.l,c.k,c.g,c.d,c.a,c.f,c.c],styles:[""]}),t})();const m=function(t){return[t,"edit"]};function f(t,i){if(1&t){const t=n.Ob();n.Nb(0,"tr"),n.Nb(1,"td"),n.ic(2),n.Mb(),n.Nb(3,"td"),n.ic(4),n.Mb(),n.Nb(5,"td"),n.ic(6),n.Mb(),n.Nb(7,"td"),n.Nb(8,"a",9),n.Jb(9,"i",10),n.Mb(),n.Nb(10,"button",11),n.Ub("click",function(){n.ec(t);const e=i.$implicit;return n.Wb().removeAlbum(e)}),n.Jb(11,"i",12),n.Mb(),n.Mb(),n.Mb()}if(2&t){const t=i.$implicit;n.yb(2),n.jc(t.id),n.yb(2),n.jc(t.userId),n.yb(2),n.jc(t.title),n.yb(2),n.Zb("state",t)("routerLink",n.bc(5,m,t.id))}}const p=function(){return["new"]},g=[{path:"",component:(()=>{class t{constructor(t,i,e){this.albumService=t,this.router=i,this.location=e,this.albums=[]}ngOnInit(){this.fetchData(),this.routeChangeListener()}fetchData(){this.albumsSub=this.albumService.getAlbums().subscribe(t=>{this.albums=t})}removeAlbum(t){this.albumsSub=this.albumService.deleteAlbum(t.id).subscribe(()=>{this.albums=this.albums.filter(i=>i.id!==t.id)})}ngOnDestroy(){this.albumsSub.unsubscribe()}routeChangeListener(){this.router.events.subscribe(t=>{if(t instanceof s.c){const t=this.location.getState();if(t.id){const i={id:t.id,userId:t.userId,title:t.title};this.albums=t.add?[i,...this.albums]:this.albums.map(e=>e.id===t.id?i:e)}}})}}return t.\u0275fac=function(i){return new(i||t)(n.Ib(u),n.Ib(s.f),n.Ib(b.i))},t.\u0275cmp=n.Cb({type:t,selectors:[["app-albums"]],decls:22,vars:3,consts:[[1,"row"],[1,"col-sm-9"],[1,"d-flex","justify-content-between"],["title","Add album",1,"btn","btn-primary","d-flex","align-self-center",3,"routerLink"],[1,"ti-plus"],[1,"table"],[1,"thead-light"],[4,"ngFor","ngForOf"],[1,"col","sm-3"],["title","Edit album",1,"btn","btn-primary","mr-2",3,"state","routerLink"],[1,"ti-pencil"],["title","Remove album",1,"btn","btn-danger",3,"click"],[1,"ti-trash"]],template:function(t,i){1&t&&(n.Nb(0,"div",0),n.Nb(1,"div",1),n.Nb(2,"div",2),n.Nb(3,"h1"),n.ic(4,"Albums"),n.Mb(),n.Nb(5,"a",3),n.Jb(6,"i",4),n.Mb(),n.Mb(),n.Nb(7,"table",5),n.Nb(8,"thead",6),n.Nb(9,"tr"),n.Nb(10,"th"),n.ic(11,"#ID"),n.Mb(),n.Nb(12,"th"),n.ic(13,"User ID"),n.Mb(),n.Nb(14,"th"),n.ic(15,"Title"),n.Mb(),n.Nb(16,"th"),n.ic(17,"Action"),n.Mb(),n.Mb(),n.Mb(),n.Nb(18,"tbody"),n.hc(19,f,12,7,"tr",7),n.Mb(),n.Mb(),n.Mb(),n.Nb(20,"div",8),n.Jb(21,"router-outlet"),n.Mb(),n.Mb()),2&t&&(n.yb(5),n.Zb("routerLink",n.ac(2,p)),n.yb(14),n.Zb("ngForOf",i.albums))},directives:[s.h,b.k,s.j],styles:["table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]:last-child{width:120px}"]}),t})(),children:[{path:"new",component:h},{path:":id/edit",component:h}]}];let M=(()=>{class t{}return t.\u0275mod=n.Gb({type:t}),t.\u0275inj=n.Fb({factory:function(i){return new(i||t)},imports:[[s.i.forChild(g)],s.i]}),t})(),y=(()=>{class t{}return t.\u0275mod=n.Gb({type:t}),t.\u0275inj=n.Fb({factory:function(i){return new(i||t)},providers:[u],imports:[[b.c,M,r.b,c.j]]}),t})()}}]);